# Proposal: enhance-dajiao-mechanics

## Summary
增强打胶机制，添加随机事件、连击系统和每日首次奖励，使游戏更有趣味性。

## Motivation
当前打胶机制过于单调，只是简单的概率判定，缺乏惊喜和互动元素。

## Changes

### 1. 随机事件系统 (8种)
| 事件 | 概率 | 效果 |
|------|------|------|
| 暴击 | 3% | 增长x3 |
| 失手 | 2% | 损失x2 |
| 硬度觉醒 | 5% | 额外+1~2硬度 |
| 金币掉落 | 8% | 获得10-30金币 |
| 时间扭曲 | 2% | 立即重置冷却 |
| 灵感迸发 | 3% | 下次打胶必定成功 |
| 观众效应 | 5% | 5分钟内有人打胶则双方+1cm |
| 神秘力量 | 2% | 随机变化±5~15cm |

### 2. 连击系统
- 追踪连续成功(非负数变化)打胶次数
- 3连: +1cm bonus
- 5连: +2cm + 5金币
- 10连: +5cm + 20金币 + 1硬度
- 失败时重置连击

### 3. 每日首次奖励
- 每天第一次打胶额外+2cm
- 基于用户时区(Asia/Shanghai)判定日期

## Files Modified
- `main.py`: 打胶逻辑增强
- `niuniu_game_texts.yml`: 新增事件文本
- `niuniu_config.py`: 新增配置常量

## Risks
- 连击系统可能让玩家过于强大 → 通过概率平衡
- 观众效应需要追踪最近打胶的用户 → 使用last_actions文件
