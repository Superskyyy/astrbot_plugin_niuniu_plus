# 牛牛大作战 Pro Max Plus 🚀

> 基于 [astrbot_plugin_niuniu](https://github.com/zgojin/astrbot_plugin_niuniu) 重构，感谢原作者 **zgojin** 的创意与贡献！

一个**极其搞怪**的群聊互动插件，包含牛牛养成、对战、商城、妖牛市等丰富玩法。

### 为什么选择这个插件？

- **800+ 条趣味文案** - 每次互动都有不同的惊喜反馈
- **疯狂的群体事件** - 混沌风暴、牛牛均富、劫富济贫...一人操作，全群遭殃
- **难以预料的机制** - 寄生系统、链式反应、妖牛市妖股、命运骰子翻倍翻负
- **丰富的攻防体系** - 盾牌、保险、祸水东引防守；月牙天冲、黑洞、大自爆进攻，攻防博弈乐趣无穷
- **负数牛牛玩法** - 被打成负数？别急，这里有专属翻身道具和趣味文案
- **防不胜防** - 你以为买了盾牌就安全了？试试被寄生、被均富、被黑洞吸走

## 快速开始

安装插件后，在群内发送 `牛牛菜单` 或 `牛牛帮助` 查看所有指令。

## 指令一览

| 指令 | 说明 |
|------|------|
| `注册牛牛` | 初始化你的牛牛（1-10cm随机） |
| `打胶` | 锻炼牛牛，可能增长或缩短 |
| `我的牛牛` | 查看当前状态 |
| `比划比划 @目标 [金额]` | 发起对决，可下注10-无上限金币 |
| `牛牛排行 [长度/金币]` | 查看排行榜（默认长度）|
| `牛牛商城` | 浏览道具商城 |
| `牛牛购买 编号 [数量]` | 购买道具 |
| `牛牛背包` | 查看已有道具 |
| `牛牛妖市` | 妖牛股交易系统 |
| `开冲` / `停止开冲` | 挂机赚金币（3次/天，最长12小时） |
| `飞飞机` | 随机事件，有惊喜有风险 |
| `牛牛开` / `牛牛关` | 管理员开关插件 |
| `牛牛补贴 @用户 长度 硬度 金币` | 管理员补贴/扣除属性 |

## 核心玩法

### 打胶机制

- **10分钟内**：冷却中，无法打胶
- **10-30分钟**：越早打胶失败率越高
- **30分钟后**：正常判定

### 比划对决

- 胜率由长度和硬度（隐藏属性）共同决定
- 基础胜率 50% ± 长度影响(30%) ± 硬度影响(20%)
- 最终胜率范围：20%-80%
- 可下注 10-无上限 金币，发起方先入池彩头；赢家取回自己彩头 + 对手赔付（扣税后，对手不足则按现有金币归零），输家彩头归零不欠债

### 经济系统

| 来源 | 频率 | 收益 |
|------|------|------|
| 开冲 | 3次/天，每次最长12小时 | 基础600 + 时长奖励，满冲约900-1000/次 |
| 飞飞机 | 2小时冷却 | -200 ~ +400（有风险） |

**每日收益预估**：约 3000 金币/天

### 牛牛妖市

全新妖牛股交易系统，牛价随游戏事件剧烈波动：

| 事件类型 | 波动幅度 |
|----------|----------|
| 打胶 | 0.5%-2% |
| 比划 | 1%-5% |
| 道具 | 2%-8% |
| 混沌风暴 | 5%-20% |
| 全局事件 | 10%-30% |

指令：`牛牛妖市`、`牛牛妖市 购买 <金额>`、`牛牛妖市 出售 [数量/全部]`、`牛牛妖市 持仓`

## 商城道具

### 增益类

| 道具 | 价格 | 效果 |
|------|------|------|
| 巴黎牛家 | 200 | +10硬度，随机-1~10%长度 |
| 致命节奏 x5 | 100 | 无连续打胶debuff |
| 小蓝片 | 200 | 下次比划硬度视为100 |

### 进攻类

| 道具 | 价格 | 效果 |
|------|------|------|
| 淬火爪刀 | 100 | 掠夺时额外+10%长度和硬度 |
| 劫富济贫 | 600 | 抢首富50%长度+20%硬度，分给随机3人 |
| 月牙天冲 | 300 | 随机群友，双方损失你50%长度 |
| 牛牛大自爆 | 250 | 自己归零，伤害分摊到top3 |
| 牛牛黑洞 | 300 | 吸取5-15人各3-10%长度，50%归你/10%喷路人/10%反噬/10%反馈/20%消散 |
| 牛牛寄生 | 150 | 寄生指定群友，宿主增长>=你长度5%时抽取增长的25% |

### 防御类

| 道具 | 价格 | 效果 |
|------|------|------|
| 妙脆角 | 70 | 防止一次长度减半 |
| 牛牛反弹 | 125 | 受到>=50cm伤害时反弹给攻击者 |
| 牛牛盾牌 | 500 | 3层护盾（购买时扣50%长度和硬度） |
| 祸水东引 | 125 | 转嫁>=50cm伤害给随机群友 |
| 上保险 | 1000 | 10次理赔，损失>=50cm或硬度>=10赔200金币 |
| 驱牛药 | 75 | 清除身上的寄生牛牛 |

### 娱乐/特殊类

| 道具 | 价格 | 效果 |
|------|------|------|
| 穷牛一生 | 25 | 随机盲盒 |
| 命运骰子 | 50 | 50%翻倍/48%减半/1%×4/1%×-2 |
| 混沌风暴 | 500 | 随机10人触发奇怪事件 |
| 夺牛魔蝌蚪罐头 | 888 | 50%夺全部/20%混沌/20%大自爆/10%归零 |
| 牛牛均富/负卡 | 动态 | 全群长度和硬度取平均值，价格≥1888（分布越散越贵）|
| 绝对值！ | 动态 | 负数牛牛花费 \|长度\|×0.5 金币翻正 |

## 防御机制详解

**优先级**: 反弹 > 祸水东引 > 护盾 > 保险

**牛牛反弹**（125金币，1次）
- 受到>=50cm伤害时反弹给攻击者
- 反弹后可触发攻击者的护盾、祸水东引、保险
- 如果攻击者也有反弹，可以形成乒乓连弹！（最多5连弹）
- 无法反弹夺牛魔的伤害

**牛牛盾牌**（500金币，3层）
- 完全免疫：劫富济贫、混沌风暴负面、月牙天冲、被别人大自爆
- 减伤：夺牛魔每层减10%伤害

**祸水东引**（125金币，1次）
- 受到>=50cm伤害时转嫁给随机群友
- 无法转移夺牛魔的伤害

**上保险**（1000金币，10次）
- 损失>=50cm 或 >=10硬度 时赔付200金币
- 自残类道具不赔

## 寄生系统

- `牛牛购买 18 @目标` 在目标身上种下寄生牛牛
- 触发条件：宿主单次增长 >= 寄生者长度的5%
- 触发效果：抽取宿主**本次增长**的25%长度 + 宿主总硬度的25%
- 支持链式反应（A→B→C递归触发）
- 宿主可购买**驱牛药**清除寄生

## 反馈与支持

有问题或建议请提交 [Issues](https://github.com/Superskyyy/astrbot_plugin_niuniu_plus/issues) 或 @Superskyyy

---

## 🚧 开发计划（TODO）

### 高价值金币消耗池

为解决经济通胀和富豪囤积问题，计划引入多种金币消耗渠道：

#### 1. 每日订阅服务（优先实现）🔥
**设计理念**：每天自动扣费，金币不足自动取消，提供强大但昂贵的buff效果

价格区间：**5万-50万金币/天**

订阅服务列表（计划中）：
- **牌面保护** (50,000/天) - 完全免疫所有主动道具攻击（劫富济贫、混沌、月牙、黑洞、大自爆等）
- **打胶特权** (30,000/天) - 打胶冷却减半(5分钟)，成功率+20%
- **比划霸主** (40,000/天) - 比划胜率+15%，失败不扣长度
- **财富护盾** (100,000/天) - 每天自动+10,000金币，免疫金币损失
- **长度守护** (80,000/天) - 长度不会低于订阅时的长度，任何减少都会自动恢复
- **硬度永恒** (60,000/天) - 硬度锁定在100，不会衰减
- **妖牛市VIP** (150,000/天) - 妖牛券交易手续费减半，倒手费减半，收益税减20%
- **幸运之星** (200,000/天) - 所有随机事件50%概率往好的方向倾斜
- **寄生免疫** (20,000/天) - 完全免疫所有寄生牛牛
- **至尊会员** (500,000/天) - 以上所有效果叠加！

#### 2. 永久BUFF商店（计划中）
**设计理念**：一次性购买，永久生效，买断制（库存有限）

价格区间：**50万-500万金币**

示例道具（规划）：
- **永久+10%打胶成功率** (100万) - 提高打胶成功率上限
- **永久+5cm长度上限** (200万) - 突破长度天花板
- **永久免疫负数** (500万) - 永远不会变成负数牛牛
- **永久硬度+10** (150万) - 硬度永久提升
- **永久金币利息** (300万) - 每天获得持有金币1%的利息
- **永久比划加成** (180万) - 比划永久+10%胜率

#### 3. 超级大招（计划中）
**设计理念**：一次性消耗，毁天灭地的效果，震撼全场

价格区间：**50万-200万金币**

示例道具（规划）：
- **核弹** (100万) - 清空top10所有玩家的长度，引发妖牛市崩盘
- **时光倒流** (80万) - 全群所有人回到1天前的状态
- **全群翻倍** (120万) - 全群所有人长度×2（包括负数）
- **终极均富** (150万) - 全群长度、硬度、金币全部平均化
- **妖股涨停** (200万) - 强制妖牛股涨停30%，24小时内不受其他事件影响
- **禁言诅咒** (50万) - 随机一位群友24小时无法使用任何牛牛指令

#### 4. 牛牛基金系统（计划中）🔥
**设计理念**：所有税收/手续费汇入群级公共基金，基金达到阈值时自动触发搞怪群体事件

- **税收来源**：妖牛券买卖手续费、收益税、商品消费税、比划下注税（原本蒸发的金币全部流入基金）
- **动态阈值**：基于群内活跃玩家平均金币计算（×2/×5/×10/×25），群越活跃阈值越高
- **冷却机制**：两次事件间隔至少30分钟
- **查看命令**：`牛牛基金` 查看余额、进度条、下一阈值

事件列表（12种，按规模分级）：

| 级别 | 消耗 | 事件 | 效果 |
|------|------|------|------|
| 小事件 | 30% | ☔ 金币雨 | 基金平分给当天活跃玩家 |
| 小事件 | 30% | 🎰 牛牛彩票 | 随机1人独吞 |
| 小事件 | 30% | 💎 硬度风暴 | 所有人硬度随机±5~15 |
| 中事件 | 50% | 📊 妖牛市干预 | 基金入市拉高/砸盘牛价 |
| 中事件 | 50% | 🦹 劫富济牛 | 前3名各扣20%分给后3名 |
| 大事件 | 70% | 🌪️ 牛牛大乱斗 | 所有人金币随机重分（总量不变） |
| 大事件 | 70% | ✨ 黄金牛时代 | 30分钟内所有收益翻倍 |
| 大事件 | 70% | 🧧 牛牛红包雨 | 拆成5~10个红包，先到先得 |
| 超级事件 | 90% | 🎡 牛牛转转乐 | 1人暴富，另1人牛牛缩成1cm |
| 超级事件 | 90% | 🧬 全民进化 | 所有人长度+硬度同步成长 |

#### 5. 投资系统（计划中）
**设计理念**：长期坑钱，有收益但也有极大风险，类似博彩

价格区间：**100万起步，无上限**

示例项目（规划）：
- **牛牛房产** - 100万起，每天收益1%，但有30%概率烂尾血本无归
- **牛牛基金** - 持续定投，月结算，可能赚50%也可能亏80%
- **牛牛矿场** - 购买矿机（50万-200万），每天挖矿产出，但有维护费和故障风险
- **牛牛押宝场** - 豪拼系统，押大小、转转乐、21点，最低10万起
- **牛牛众筹** - 众筹项目，成功10倍收益，失败血本无归

---

## License

MIT License
